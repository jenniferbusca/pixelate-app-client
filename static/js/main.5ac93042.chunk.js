(this["webpackJsonppixel-app"]=this["webpackJsonppixel-app"]||[]).push([[0],{104:function(e,t,n){e.exports=n.p+"static/media/pixel_logo.edb7f28c.png"},110:function(e,t,n){e.exports=n(254)},115:function(e,t,n){},116:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(30),o=n.n(i),c=(n(115),n(116),n(19)),l=n(22),s=n(104),u=n.n(s),m=n(255),p=n(258),g=n(9),f=n(10),d=n(12),h=n(11),E=n(13),b=n(7),O="https://pixelate-app.herokuapp.com/",y={Accept:"application/json","Content-Type":"application/json"},v=function(e){return function(t){t({type:"LOADING_IMAGES"}),fetch("".concat(O+"/users","/").concat(e)).then((function(e){return e.json()})).then((function(e){t({type:"DISPLAY_IMAGES",images:e.included.map((function(e){return{id:e.id,image_url:e.attributes.image_url,transformations:e.attributes.transformations}}))})}))}},j=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).showWidget=function(){window.cloudinary.openUploadWidget({cloudName:"df8jfhyew",uploadPreset:"eytnlidt"},(function(e,t){!e&&t&&"success"===t.event&&n.handleSubmit(t.info)}))},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleSubmit",value:function(e){var t={user_id:this.props.user.id,image_url:e.public_id};this.props.postImages(t)}},{key:"render",value:function(){var e=this;return r.a.createElement("button",{className:"nav-button",id:"upload-widget",onClick:function(){return e.showWidget()}},"UPLOAD IMAGES")}}]),t}(a.Component),I=Object(b.b)((function(e){return{images:e.imagesReducer.images,user:e.loginReducer.user}}),{postImages:function(e){return function(t){fetch(O+"/images",{method:"POST",headers:y,body:JSON.stringify({image:e})}).then((function(e){return e.json()})).then((function(e){t({type:"CREATE_IMAGES",image:e})})).catch((function(e){return console.log(e)}))}}})(Object(l.f)(j)),w={Accept:"application/json","Content-Type":"application/json"},S=function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.logout(),this.props.history.push("/")}},{key:"render",value:function(){var e=this;return r.a.createElement("button",{className:"nav-button",onClick:function(t){return e.handleSubmit(t)}},"LOG OUT")}}]),t}(a.Component),_=Object(b.b)((function(e){return{user:e.loginReducer.user,error:e.loginReducer.error}}),{logout:function(e){return function(e){e({type:"LOG_OUT"})}}})(Object(l.f)(S)),N=n(256),R=n(257),P=Object(l.f)((function(e){return r.a.createElement(m.a,null,r.a.createElement(N.a,null,r.a.createElement(R.a,{to:e.history.location.pathname},r.a.createElement(I,null))),r.a.createElement(N.a,null,r.a.createElement(R.a,{to:"/"},r.a.createElement(_,null))))})),C=Object(l.f)((function(e){return r.a.createElement(m.a,{className:"App-header",light:!0,expand:"md"},r.a.createElement(p.a,null,r.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"})),"/"===e.history.location.pathname?void 0:r.a.createElement(P,null))})),A=n(23),G=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){n.props.getCurrentImage(e)},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){(e.images.length!==this.props.images.length||e.currentImage&&void 0===this.props.currentImage)&&this.props.fetchImages(this.props.user.id)}},{key:"render",value:function(){var e=this;return this.props.images.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(A.CloudinaryContext,{cloudName:"df8jfhyew"},r.a.createElement(A.Image,{className:"img-thumbnail",publicId:t.image_url,onClick:function(){return e.handleClick(t)}},r.a.createElement(A.Transformation,{effect:t.transformations,width:"200",height:"150",crop:"fit"}))))}))}}]),t}(a.Component),k=Object(b.b)((function(e){return{images:e.imagesReducer.images,user:e.loginReducer.user,currentImage:e.imagesReducer.currentImage}}),{getCurrentImage:function(e){return function(t){t({type:"GET_CURRENT_IMAGE",image:e})}},fetchImages:v})(G),D=function(e){return r.a.createElement("div",{key:e.image.id},r.a.createElement(A.CloudinaryContext,{cloudName:"df8jfhyew"},r.a.createElement(A.Image,{className:"largeImage",publicId:e.image.image_url},r.a.createElement(A.Transformation,{effect:e.selectedImageFilter,width:"600",height:"500",crop:"fit"}))))},T={"No Effect":"none","Auto Brightness":"auto_brightness","Auto Saturation":"auto_saturation","Black & White":"blackwhite",Blur:"blur:100",Cartoonify:"cartoonify","Contrast: Light":"contrast:50","Contrast: Heavy":"contrast:100",Grayscale:"grayscale","Oil Paint":"oil_paint:80",Ombre:"gradient_fade:20","Pixelate: Light":"pixelate:10","Pixelate: Heavy":"pixelate:30",Sepia:"sepia:80",Sharpen:"sharpen:300",Vignette:"vignette:10"},L=function(e){return r.a.createElement("select",{value:e.selectedImageFilter||"none",onChange:e.handleFilterChange},Object.keys(T).map((function(e){return r.a.createElement("option",{key:e,value:T[e]},e)})))},F=n(259),M=n(260),U=n(261),x=n(262),B=n(263),W=n(264),J=n(265),H=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleSave=function(){n.props.saveImage(n.props.currentImage,n.state.selectedImageFilter)},n.handleRemove=function(){n.props.removeImage(n.props.currentImage.id,n.props.currentImage.user_id,n.props.history)},n.setSelectedImageFilter=function(e){n.setState({selectedImageFilter:e})},n.handleFilterChange=function(e){var t="none"===e.target.value?null:e.target.value;n.setSelectedImageFilter(t)},n.state={selectedImageFilter:null},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setSelectedImageFilter(this.props.currentImage.transformations)}},{key:"componentDidUpdate",value:function(e){e.currentImage.id!==this.props.currentImage.id&&this.setSelectedImageFilter(this.props.currentImage.transformations)}},{key:"render",value:function(){var e=this,t=this.props.currentImage;return r.a.createElement(F.a,null,r.a.createElement(M.a,{className:"card-img"},r.a.createElement(D,{image:t,selectedImageFilter:this.state.selectedImageFilter})),r.a.createElement(U.a,{md:"4"},r.a.createElement(M.a,null,r.a.createElement(x.a,null,"FILTER EFFECTS"),r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(L,{handleFilterChange:this.handleFilterChange,selectedImageFilter:this.state.selectedImageFilter})),r.a.createElement(J.a,{onClick:function(t){return e.handleSave()}},"Save Changes"))),r.a.createElement(M.a,null,r.a.createElement(x.a,null,"DELETE IMAGE"),r.a.createElement(B.a,null,r.a.createElement(W.a,null,"No longer want this image?"),r.a.createElement(J.a,{onClick:function(t){return e.handleRemove()}},"Delete Image")))))}}]),t}(a.Component),V=Object(b.b)((function(e){return{images:e.imagesReducer.images,currentImage:e.imagesReducer.currentImage}}),{saveImage:function(e,t){return function(n){fetch("".concat(O+"/images","/").concat(e.id),{method:"PUT",headers:y,body:JSON.stringify({image:e,transformation:t})}).then((function(e){return e.json()})).then((function(e){return n({type:"UPDATE_IMAGE",image:e}),e})).then((function(e){var t=e.data,a=t.id,r=t.attributes,i=r.transformations,o=r.image_url;n({type:"GET_CURRENT_IMAGE",image:{id:a,transformations:i,image_url:o}})}))}},removeImage:function(e,t,n){return function(t){t({type:"REMOVE_IMAGE"}),fetch("".concat(O+"/images","/").concat(e),{method:"DELETE",headers:y,body:JSON.stringify({imageId:e})}).then((function(e){t({type:"GET_CURRENT_IMAGE",image:void 0})}))}}})(Object(l.f)(H)),z=n(266),Y=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).handleLoadingImages=function(){return n.props.loading?r.a.createElement("div",null,r.a.createElement("p",null,"Loading Images...")):r.a.createElement(k,{images:n.props.images})},n.handleImage=function(){return n.props.currentImage?r.a.createElement(V,{image:n.props.currentImage}):r.a.createElement("div",{className:"select-msg"},r.a.createElement("p",null,"UPLOAD OR CLICK ON AN IMAGE TO BEGIN"),r.a.createElement("p",null,r.a.createElement(I,null)))},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchImages(this.props.user.id)}},{key:"render",value:function(){return r.a.createElement(z.a,{className:"container-fluid"},r.a.createElement(U.a,{className:"img-list",sm:{size:2,offset:1}},this.handleLoadingImages()),r.a.createElement(U.a,{className:"selected-image",sm:{size:9,offset:0}},this.handleImage()))}}]),t}(a.Component),K=Object(b.b)((function(e){return{images:e.imagesReducer.images,user:e.loginReducer.user,currentImage:e.imagesReducer.currentImage}}),{fetchImages:v})(Y),$=n(31),q=n(267),Q=n(270),X=n(268),Z=n(269);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){Object($.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleErrors=function(e){return r.a.createElement("ul",{className:"errors"},Object.entries(e).map((function(e,t){return r.a.createElement("li",{key:e},e)})))},n.state={user:{email:"",password:""},error:""},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.login(this.state.user,this.props.history),this.setState({error:this.props.error})}},{key:"render",value:function(){var e=this;return r.a.createElement(q.a,null,r.a.createElement(z.a,null,r.a.createElement(U.a,null,this.state.error?r.a.createElement(Q.a,{color:"secondary"},this.handleErrors(this.props.error)):null,r.a.createElement(M.a,{className:"login-form"},r.a.createElement(B.a,null,r.a.createElement(X.a,{name:"loginForm",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(Z.a,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{className:"form-control",placeholder:"Enter email to login or sign-up",type:"email",name:"email",onChange:function(t){return e.setState({user:te({},e.state.user,{email:t.target.value})})},value:this.state.email}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(Z.a,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{className:"form-control",placeholder:"Password",type:"password",name:"password",onChange:function(t){return e.setState({user:te({},e.state.user,{password:t.target.value})})},value:this.state.password})),r.a.createElement(J.a,{type:"submit",className:"btn btn-primary"},"Submit")))))))}}]),t}(a.Component),ae=Object(b.b)((function(e){return{user:e.loginReducer.user,error:e.loginReducer.error}}),{login:function(e,t){return function(n){fetch("https://pixelate-app.herokuapp.com//users",{mode:"cors",method:"POST",headers:w,body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){return n({type:"GET_USER",user:e}),e})).then((function(e){void 0===e.result?(n({type:"LOGGED_IN"}),t.push("/images/".concat(e.id))):n({type:"LOGIN_ERROR",error:e.user})}))}}})(ne);function re(e){var t=e.location;return r.a.createElement(M.a,{className:"not-found"},r.a.createElement(x.a,null,"404 PAGE NOT FOUND"),r.a.createElement(B.a,null,r.a.createElement(W.a,null,"Page not found - the path, ",t.pathname,", did not match any React Router routes."),r.a.createElement(c.b,{to:"/"},"Back to Home")))}var ie=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(c.a,{basename:"/pixelate-app-client"},r.a.createElement(C,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",component:ae,exact:!0}),r.a.createElement(l.a,{path:"/images/:user_id",component:K}),r.a.createElement(l.a,{path:"*",component:re}))))},oe=n(17),ce=n(69),le=n(107),se=n(108),ue=n.n(se),me=n(109),pe=n(70);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach((function(t){Object($.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{images:[],loading:!1,currentImage:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_IMAGES":return fe({},e,{images:Object(pe.a)(e.images),loading:!0});case"DISPLAY_IMAGES":return fe({},e,{images:t.images,loading:!1});case"CREATE_IMAGES":return fe({},e,{images:[t.image].concat(Object(pe.a)(e.images)),currentImage:t.image,loading:!1});case"UPDATE_IMAGE":return fe({},e,{images:e.images.map((function(e){return e.id===t.image.data.id?fe({},e,{transformations:t.image.data.attributes.transformations}):e}))});case"REMOVE_IMAGE":var n=e.images.filter((function(e){return e.id!==t.id}));return fe({},e,{images:n,loading:!1});case"GET_CURRENT_IMAGE":return fe({},e,{currentImage:t.image});default:return e}};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(n,!0).forEach((function(t){Object($.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{},error:"",logged_in:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return Ee({},e,{user:t.user});case"LOGIN_ERROR":return Ee({},e,{error:t.error});case"LOGGED_IN":return Ee({},e,{logged_in:!0});case"LOG_OUT":return Ee({},e,{logged_in:!1});default:return e}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(253);n.d(t,"persistedReducer",(function(){return ve})),n.d(t,"store",(function(){return je})),n.d(t,"persistor",(function(){return Ie}));var Oe=Object(oe.c)({imagesReducer:de,loginReducer:be}),ye={key:"root",storage:ue.a},ve=Object(ce.a)(ye,(function(e,t){return"LOG_OUT"===t.type&&(e=void 0),Oe(e,t)})),je=Object(oe.d)(ve,Object(oe.a)(me.a)),Ie=Object(ce.b)(je);o.a.render(r.a.createElement(b.a,{store:je},r.a.createElement(le.PersistGate,{persistor:Ie},r.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[110,1,2]]]);
//# sourceMappingURL=main.5ac93042.chunk.js.map